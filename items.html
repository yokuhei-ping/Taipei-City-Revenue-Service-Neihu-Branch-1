<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="內湖分處宣導品品項：可搜尋、篩選、依雲端發票張數排序，快速查詢兌換方式與注意事項。" />
  <title>內湖分處｜宣導品品項</title>
  <style>
    :root{
      --bg:#f8fafc; --card:#ffffff; --muted:#64748b; --text:#0f172a; --line:#e2e8f0;
      --brand:#0f766e; --brand2:#115e59; --ok:#16a34a; --warn:#f59e0b; --bad:#ef4444;
      --shadow: 0 1px 2px rgba(15,23,42,.06), 0 12px 30px rgba(15,23,42,.08);
      --r: 18px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial, sans-serif;background:var(--bg);color:var(--text)}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1100px;margin:0 auto;padding:0 16px}

    /* Top bar */
    .top{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.82);backdrop-filter: blur(10px);border-bottom:1px solid rgba(226,232,240,.8)}
    .top .inner{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0}
    .brand{display:flex;align-items:center;gap:10px}
    .logo{width:40px;height:40px;border-radius:14px;background:var(--brand);color:#fff;display:grid;place-items:center;font-weight:800;font-size:12px;letter-spacing:.5px}
    .brand h1{margin:0;font-size:14px;line-height:1.2}
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}
    .nav{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .btn{border:1px solid var(--line);background:#fff;border-radius:14px;padding:10px 12px;font-size:13px;font-weight:700;box-shadow:0 1px 2px rgba(15,23,42,.05)}
    .btn.primary{border-color:transparent;background:var(--brand);color:#fff}
    .btn:hover{filter:brightness(.98)}
    .btn.primary:hover{background:var(--brand2);filter:none}

    /* Hero */
    .hero{padding:22px 0 10px}
    .heroGrid{display:grid;gap:14px;grid-template-columns: 1fr;}
    .heroCard{background:linear-gradient(135deg, #ffffff, #f1f5f9);border:1px solid var(--line);border-radius:calc(var(--r) + 8px);box-shadow:var(--shadow);padding:18px}
    .heroTitle{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .heroTitle h2{margin:0;font-size:22px;letter-spacing:-.02em}
    .tag{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);background:#fff;border-radius:999px;padding:6px 10px;font-size:12px;color:var(--muted)}
    .dot{width:8px;height:8px;border-radius:999px;background:var(--ok)}
    .sub{margin:8px 0 0;color:var(--muted);font-size:13px;line-height:1.6}
    .notice{margin-top:14px;display:grid;gap:10px}
    .notice .box{background:#fff;border:1px solid var(--line);border-radius:var(--r);padding:14px}
    .notice h3{margin:0 0 8px;font-size:13px}
    .notice ul{margin:0;padding-left:18px;color:var(--muted);font-size:13px;line-height:1.7}

    /* Filters */
    .filters{margin:14px 0 0;display:grid;gap:10px;grid-template-columns: 1fr;}
    .field{background:#fff;border:1px solid var(--line);border-radius:var(--r);padding:10px 12px;display:flex;gap:10px;align-items:center;box-shadow:0 1px 2px rgba(15,23,42,.04)}
    .field label{font-size:12px;color:var(--muted);font-weight:800;min-width:64px}
    .field input,.field select{width:100%;border:0;outline:0;background:transparent;font-size:14px}
    .chips{display:flex;gap:8px;flex-wrap:wrap}
    .chip{border:1px solid var(--line);background:#fff;border-radius:999px;padding:8px 10px;font-size:12px;font-weight:800;color:var(--muted);cursor:pointer;user-select:none}
    .chip.active{background:var(--brand);color:#fff;border-color:var(--brand)}

    /* Summary */
    .summary{margin:14px 0 8px;display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap}
    .summary .meta{color:var(--muted);font-size:13px}

    /* Grid */
    .grid{display:grid;gap:12px;grid-template-columns: repeat(1, minmax(0, 1fr));padding:8px 0 24px}
    .card{background:var(--card);border:1px solid var(--line);border-radius:calc(var(--r) + 8px);box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column}
    .img{height:150px;background:linear-gradient(135deg, #e2e8f0, #f8fafc);display:grid;place-items:center;color:var(--muted);font-weight:900}
    .img img{width:100%;height:100%;object-fit:cover;display:block}
    .cardBody{padding:14px 14px 12px;display:grid;gap:10px}
    .name{font-size:15px;font-weight:900;letter-spacing:-.01em;line-height:1.35}
    .badges{display:flex;gap:8px;flex-wrap:wrap}
    .badge{display:inline-flex;align-items:center;gap:6px;border-radius:999px;border:1px solid var(--line);background:#fff;padding:6px 10px;font-size:12px;color:var(--muted);font-weight:800}
    .badge.ok{border-color:rgba(22,163,74,.25);background:rgba(22,163,74,.08);color:#166534}
    .badge.out{border-color:rgba(239,68,68,.25);background:rgba(239,68,68,.08);color:#991b1b}
    .badge.lim{border-color:rgba(245,158,11,.25);background:rgba(245,158,11,.10);color:#92400e}
    .line{border-top:1px dashed rgba(226,232,240,.9)}
    .kv{display:flex;justify-content:space-between;gap:10px;font-size:13px;color:var(--muted)}
    .kv b{color:var(--text)}
    .note{font-size:12px;color:var(--muted);line-height:1.55}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    .actions .btn{flex:1;min-width:120px;text-align:center}

    /* Footer */
    footer{border-top:1px solid rgba(226,232,240,.9);background:#fff}
    .foot{padding:18px 0;color:var(--muted);font-size:12px;line-height:1.6}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(2,6,23,.55);display:none;align-items:center;justify-content:center;padding:16px;z-index:60}
    .modal.show{display:flex}
    .modalCard{width:min(720px, 100%);background:#fff;border-radius:24px;border:1px solid rgba(226,232,240,.9);box-shadow:var(--shadow);overflow:hidden}
    .modalHead{display:flex;justify-content:space-between;gap:12px;align-items:flex-start;padding:16px 16px;border-bottom:1px solid rgba(226,232,240,.9)}
    .modalHead h3{margin:0;font-size:16px}
    .x{border:1px solid var(--line);background:#fff;border-radius:14px;width:40px;height:40px;display:grid;place-items:center;cursor:pointer}
    .modalBody{padding:16px 16px 18px;display:grid;gap:12px}
    .steps{margin:0;padding-left:18px;color:var(--muted);font-size:13px;line-height:1.7}
    .callout{border:1px solid var(--line);background:linear-gradient(135deg,#ffffff,#f8fafc);border-radius:18px;padding:12px}
    .callout b{color:var(--text)}

    /* Responsive */
    @media (min-width: 720px){
      .heroGrid{grid-template-columns: 1.25fr .75fr;}
      .filters{grid-template-columns: 1.2fr .6fr .6fr;}
      .grid{grid-template-columns: repeat(2, minmax(0, 1fr));}
    }
    @media (min-width: 1024px){
      .grid{grid-template-columns: repeat(3, minmax(0, 1fr));}
    }
  </style>
</head>

<body>
  <header class="top">
    <div class="wrap">
      <div class="inner">
        <a class="brand" href="index.html" title="回到入口頁（若你有）">
          <div class="logo">內湖</div>
          <div>
            <h1>臺北市稅捐稽徵處｜內湖分處</h1>
            <p>宣導品品項（可搜尋／篩選）</p>
          </div>
        </a>
        <div class="nav">
          <a class="btn" href="index.html">入口頁</a>
          <a class="btn primary" href="#items">看品項</a>
          <button class="btn" id="copyLinkBtn" type="button">複製本頁連結</button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="wrap">
        <div class="heroGrid">
          <div class="heroCard">
            <div class="heroTitle">
              <div>
                <h2>宣導品品項</h2>
                <div class="sub">快速查「需要幾張雲端發票」與「是否兌換完畢」。支援搜尋、依張數排序、只看可兌換。</div>
              </div>
              <div class="tag" title="請依實際更新日期調整">
                <span class="dot"></span>
                更新：<b id="updated">114/06/26</b>
              </div>
            </div>

            <div class="notice">
              <div class="box">
                <h3>兌換注意事項</h3>
                <ul>
                  <li>數量有限，換完為止。</li>
                  <li>本活動為<strong>隨機捐贈</strong>（例如：伊甸基金會／創世基金會）。</li>
                  <li>不提供郵寄服務；以<strong>登記優先順序</strong>兌換，若兌換完畢不另行通知。</li>
                  <li>如欲兌換，請先致電承辦人：<strong>(02) 2792-2059 轉 407</strong>（將另行通知取貨時間）。</li>
                </ul>
              </div>
            </div>

            <div class="filters" id="items">
              <div class="field">
                <label for="q">搜尋</label>
                <input id="q" placeholder="輸入品名關鍵字：例如 史努比 / 保溫 / 垃圾袋" />
              </div>
              <div class="field">
                <label for="status">狀態</label>
                <select id="status">
                  <option value="all">全部</option>
                  <option value="available">只看可兌換</option>
                  <option value="out">只看兌換完畢</option>
                </select>
              </div>
              <div class="field">
                <label for="sort">排序</label>
                <select id="sort">
                  <option value="invoicesAsc">張數：由少到多</option>
                  <option value="invoicesDesc">張數：由多到少</option>
                  <option value="nameAsc">品名：A→Z</option>
                </select>
              </div>
            </div>

            <div class="summary">
              <div class="meta" id="meta">載入中…</div>
              <div class="chips" aria-label="快速分類">
                <div class="chip active" data-cat="all">全部</div>
                <div class="chip" data-cat="折價專區">折價專區</div>
                <div class="chip" data-cat="禮卡/禮券">禮卡/禮券</div>
                <div class="chip" data-cat="日用品">日用品</div>
              </div>
            </div>
          </div>

          <div class="heroCard">
            <div class="tag"><span class="dot"></span> 建議做法</div>
            <p class="sub" style="margin-top:10px">
              你只要更新下方「資料清單」就會自動換版面。圖片可放在 <b>assets/items/</b>，
              例如 <b>assets/items/snoopy-mug.jpg</b>。
            </p>
            <div class="notice" style="margin-top:12px">
              <div class="box">
                <h3>上架到 GitHub Pages（超快）</h3>
                <ul>
                  <li>把本檔案存成 <b>items.html</b> 丟到 repo 根目錄</li>
                  <li>Settings → Pages → main / (root)</li>
                  <li>網址：<b>https://帳號.github.io/RepoName/items.html</b></li>
                </ul>
              </div>
            </div>
            <a class="btn primary" href="#items" style="display:block;margin-top:12px">開始查品項</a>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="wrap">
        <div class="grid" id="grid"></div>
      </div>
    </section>
  </main>

  <footer>
    <div class="wrap">
      <div class="foot">
        <div><b>臺北市稅捐稽徵處｜內湖分處</b>　宣導品品項頁（靜態網頁範本）</div>
        <div>提醒：本頁資訊請依實際庫存、活動規範與公告更新。請勿在公開頁面揭露不必要的個資。</div>
      </div>
    </div>
  </footer>

  <!-- Modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modalCard">
      <div class="modalHead">
        <div>
          <h3 id="modalTitle">兌換說明</h3>
          <div class="sub" id="modalSub" style="margin:6px 0 0">—</div>
        </div>
        <button class="x" id="closeModal" aria-label="關閉">✕</button>
      </div>
      <div class="modalBody">
        <div class="callout">
          請先致電：<b>(02) 2792-2059 轉 407</b>　（將另行通知取貨時間）
        </div>
        <ol class="steps">
          <li>告知想兌換的品項與數量，並確認是否仍有庫存。</li>
          <li>依規定完成雲端發票捐贈（張數以本頁顯示為準）。</li>
          <li>依登記順序安排取貨；若兌換完畢不另行通知。</li>
          <li>本分處不提供郵寄服務。</li>
        </ol>
        <div class="actions">
          <button class="btn" id="copyItemBtn" type="button">複製品項文字</button>
          <button class="btn primary" id="closeModal2" type="button">我知道了</button>
        </div>
        <p class="note">※ 本頁為資訊彙整；實際兌換規範請以分處公告與承辦人說明為準。</p>
      </div>
    </div>
  </div>

  <script>
    /**
     * ✅ 只要改這個 items 清單就好
     * img：放你 repo 的相對路徑，例如 assets/items/xxx.jpg
     */
    const items = [
      { id: 'pot16', category: '折價專區', name: 'Dashiang 碳鋼 單把奶鍋 16cm', invoices: 25, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'wolfBottle', category: '折價專區', name: '飛狼 (316)不鏽鋼保溫瓶/個', invoices: 20, channel: '雲端發票', status: 'limited', note: '剩下綠色~', img: '' },
      { id: 'smileBag', category: '折價專區', name: '微笑保溫休閒提袋/個', invoices: 20, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'snoopyMug', category: '折價專區', name: '史努比 馬克杯 (490ML)/個', invoices: 10, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'toteCooler', category: '折價專區', name: '飛行托特保溫袋/個', invoices: 10, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'trash5L', category: '日用品', name: '北市專用垃圾袋（5 公升）', invoices: 5, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'deskCalendar', category: '日用品', name: '114年桌曆', invoices: 6, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: '7card100', category: '禮卡/禮券', name: '統一超商實品商品卡（100元）', invoices: 20, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'fami100', category: '禮卡/禮券', name: '全家 商品卡（100元）', invoices: 20, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'pxMart100', category: '禮卡/禮券', name: '100元全聯禮券', invoices: 20, channel: '雲端發票', status: 'available', note: '', img: '' },
      { id: 'carrefour100', category: '禮卡/禮券', name: '100元家樂福禮卷', invoices: 20, channel: '雲端發票', status: 'out', note: '兌換完畢（預計114年7~8月補貨）', img: '' },
    ];

    const el = (id) => document.getElementById(id);
    const grid = el('grid');
    const q = el('q');
    const statusSel = el('status');
    const sortSel = el('sort');
    const meta = el('meta');

    let activeCat = 'all';

    function formatInvoices(n){
      return `${n} 張`;
    }

    function statusBadge(s){
      if(s === 'out') return { cls: 'out', text: '兌換完畢' };
      if(s === 'limited') return { cls: 'lim', text: '數量有限' };
      return { cls: 'ok', text: '可兌換' };
    }

    function matches(it){
      const keyword = (q.value || '').trim().toLowerCase();
      const hit = !keyword || it.name.toLowerCase().includes(keyword) || (it.note||'').toLowerCase().includes(keyword);

      const st = statusSel.value;
      const stHit = (st === 'all')
        || (st === 'available' && (it.status === 'available' || it.status === 'limited'))
        || (st === 'out' && it.status === 'out');

      const catHit = activeCat === 'all' || it.category === activeCat;
      return hit && stHit && catHit;
    }

    function sorter(a,b){
      const v = sortSel.value;
      if(v === 'invoicesAsc') return a.invoices - b.invoices;
      if(v === 'invoicesDesc') return b.invoices - a.invoices;
      if(v === 'nameAsc') return a.name.localeCompare(b.name, 'zh-Hant');
      return 0;
    }

    function card(it){
      const s = statusBadge(it.status);
      const imgHtml = it.img
        ? `<img src="${it.img}" alt="${it.name}">`
        : `<div aria-hidden="true">${it.category}</div>`;

      const note = it.note ? `<div class="note">${escapeHtml(it.note)}</div>` : '';

      return `
        <article class="card">
          <div class="img">${imgHtml}</div>
          <div class="cardBody">
            <div class="name">${escapeHtml(it.name)}</div>
            <div class="badges">
              <span class="badge ${s.cls}">${s.text}</span>
              <span class="badge">${escapeHtml(it.channel)}</span>
              <span class="badge">${escapeHtml(it.category)}</span>
            </div>
            <div class="line"></div>
            <div class="kv"><span>需要雲端發票</span><b>${formatInvoices(it.invoices)}</b></div>
            ${note}
            <div class="actions">
              <button class="btn primary" type="button" data-open="${it.id}">兌換方式</button>
              <button class="btn" type="button" data-copy="${it.id}">複製</button>
            </div>
          </div>
        </article>
      `;
    }

    function render(){
      const list = items.filter(matches).sort(sorter);
      grid.innerHTML = list.map(card).join('');

      const available = list.filter(x => x.status !== 'out').length;
      const out = list.filter(x => x.status === 'out').length;
      meta.textContent = `共 ${list.length} 項（可兌換/數量有限：${available}｜兌換完畢：${out}）`;

      // bind events
      grid.querySelectorAll('[data-open]').forEach(btn => {
        btn.addEventListener('click', () => openModal(btn.dataset.open));
      });
      grid.querySelectorAll('[data-copy]').forEach(btn => {
        btn.addEventListener('click', () => copyItem(btn.dataset.copy));
      });
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#039;');
    }

    // Modal
    const modal = el('modal');
    const modalTitle = el('modalTitle');
    const modalSub = el('modalSub');
    const closeModal = () => modal.classList.remove('show');

    function openModal(id){
      const it = items.find(x => x.id === id);
      if(!it) return;
      const s = statusBadge(it.status);
      modalTitle.textContent = `兌換說明｜${it.name}`;
      modalSub.innerHTML = `需要 <b>${it.channel}</b> ${it.invoices} 張　｜狀態：<b>${s.text}</b>${it.note ? `　｜備註：<b>${escapeHtml(it.note)}</b>` : ''}`;
      modal.classList.add('show');
      el('copyItemBtn').onclick = () => copyItem(id, true);
    }

    el('closeModal').addEventListener('click', closeModal);
    el('closeModal2').addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => { if(e.target === modal) closeModal(); });
    document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeModal(); });

    // Copy helpers
    async function copyText(text){
      try{
        await navigator.clipboard.writeText(text);
        alert('已複製');
      }catch{
        // fallback
        const ta = document.createElement('textarea');
        ta.value = text; document.body.appendChild(ta);
        ta.select(); document.execCommand('copy');
        ta.remove();
        alert('已複製');
      }
    }

    function itemText(it){
      const s = statusBadge(it.status);
      const parts = [
        `宣導品：${it.name}`,
        `需要：${it.channel} ${it.invoices} 張`,
        `狀態：${s.text}`,
        it.note ? `備註：${it.note}` : null,
        `兌換：請先致電 (02) 2792-2059 轉 407`,
      ].filter(Boolean);
      return parts.join('\n');
    }

    function copyItem(id, silent=false){
      const it = items.find(x => x.id === id);
      if(!it) return;
      const text = itemText(it);
      if(silent){
        copyText(text);
      }else{
        copyText(text);
      }
    }

    el('copyLinkBtn').addEventListener('click', () => copyText(location.href));

    // Chips
    document.querySelectorAll('.chip').forEach(ch => {
      ch.addEventListener('click', () => {
        document.querySelectorAll('.chip').forEach(x => x.classList.remove('active'));
        ch.classList.add('active');
        activeCat = ch.dataset.cat;
        render();
      });
    });

    // Inputs
    [q, statusSel, sortSel].forEach(x => x.addEventListener('input', render));
    [statusSel, sortSel].forEach(x => x.addEventListener('change', render));

    render();
  </script>
</body>
</html>
